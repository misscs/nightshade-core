{#
  * @overview Macros for rending reviews and ratings.
#}

{% import '../icons/icons.macros.html' as icon %}
{% from '../buttons/buttons.macros.html' import button %}
{% from '../tooltips/tooltips.macros.html' import tooltip %}

{#
  * For rendering a list of reviews
  * Currently used on reviews pages
  *
#}
{% macro multi() %}
<article class="clearfix is-verified review" itemprop="review" itemscope="" itemtype="http://schema.org/Review">
  <meta content="2016-03-04" itemprop="datePublished">
  <meta itemprop="reviewRating" ratingvalue="5">
  <meta content="Weda A" itemprop="author">
  <meta content="The Casper Mattress" itemprop="about">
  <header class="review-header">
    <div class="review-rating">
      {{ star_rating('gold') }}
    </div>
    <div class="review-title body--serif">
      Very Dreamy!
    </div>
    <div class="review-name">
      Weda A
      <div class="review-verified-wrapper js-review-verified-wrapper">
        {% call tooltip('Verified Casper Owner') %}{{ icon.icon('checkmark', 'x-small') }}{% endcall %}
      </div>
    </div>
    <div class="review-info">
      Fredericksburg, VA
    </div>
    <div class="review-age">
      35 years old
    </div>
    <div class="review-date">
      <time datetime="2016-03-04T17:47:55Z" data-local="weekday-or-date" title="March 4, 2016 at 12:47pm EST">Friday</time>
    </div>
  </header>
  <div class="review-details-wrapper">
    <div class="review-title body--serif" itemprop="name">
      Very Dreamy!
    </div>
    <div class="review-text js-review-text">
      <p class="review-text-body js-review-text-body body--serif" itemprop="reviewBody" style="max-height: none;">
        I unpack the mattress myself, it wasn't hard but very difficult pulling the heavy box to my bedroom upstairs.   This bed is very nice to sleep on--it's firm but not too hard and it has a nice mushy softness to it at the same time.  I would highly recommend this bed  to anyone who wants to sleep tight and have sweet dreams.
      </p>
    </div>
    <div class="review-details">
      <div class="review-hours">
        {{ icon.svg('clock') }}
        <div class="review-hours-number">6</div>
        <div class="review-hours-label">hours of sleep per night</div>
      </div>
      <div class="review-partner">
        {{ icon.svg('solo') }}
        {{ icon.svg('cat') }}

        <div class="review-partner-label">Sleeps solo plus a cat</div>
      </div>
    </div>
  </div>
</article>
{% endmacro %}


{#
  * Renders a single review with a button to read all reviews.
  * Currently used on product pages
  *
  * @todo Refactor review macros. Use same markup for both display versions
  * https://github.com/CasperSleep/nightshade-core/issues/13
#}
{% macro single() %}
<div class="product-page-review-inner">
  <h1 class="product-page-review-title -dark">Casper sheets reviews</h1>

    {{ star_rating('blue') }}
    {{ stat_rating() }}

<div class="sans-small product-page-review-time">
  Posted
  <time data-local="weekday-or-date" datetime="2016-02-03T00:00:00Z" title="February 2, 2016 at 7:00pm EST">Feb 2</time>
</div>
<div class="js-review-text">
  <div class="js-review-text-body product-page-review-copy body--serif" itemprop="reviewBody" style="max-height: none;">
    These sheets are spectacular. they have a crispness that feels fresh and light unlike any other sheets I own. Also the fitted sheet has color tabs on the short sides so making the bed is a dream. :) Also when my sheet delivery was delayed beyond the promise date they sent me a free...Continue Reading >
  </div>
</div>
<div class="product-page-review-info"><span class="product-page-review-name sans-small">Jeffrey Zurek</span><span class="product-page-review-age sans-small">, 37 years old,</span><span class="product-page-review-location sans-small">
Tampa, FL
</span></div>

  {{ button('READ ALL REVIEWS', 'secondary', href="/sheets/reviews", class="product-page-review-btn") }}
{% endmacro %}


{#
  * Accessible display of stars
  * @todo Can this get simplified? We we use svg icons instead of relying on
  * svgs from css?
  * https://github.com/CasperSleep/nightshade-core/issues/12
#}
{% macro star_rating(color=null) %}
<abbr class="rating-stars {% if color %}rating-stars--{{ color }}{% endif %}" title="(4.5 out of 5 Stars)">
  <span class="rating-star rating-star--full">★</span><span class="rating-star rating-star--full">★</span><span class="rating-star rating-star--full">★</span><span class="rating-star rating-star--full">★</span><span class="rating-star rating-star--half">★</span>
</abbr>
{% endmacro %}


{#
  * Outputs average star review and total sample size of the data set
  *
  * @todo https://github.com/CasperSleep/nightshade-core/issues/12
#}
{% macro stat_rating() %}
    <span class="rating-stars-stats--fraction" itemprop="ratingValue">
      4.5/5
    </span>
    <span class="rating-stars-stats--total" itemprop="reviewCount">
      (102)
    </span>
  </span>
{% endmacro %}
